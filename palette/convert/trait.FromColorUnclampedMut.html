<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Temporarily convert colors in place, without clamping."><title>FromColorUnclampedMut in palette::convert - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-9ee3a5e31a2afa3e.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="palette" data-themes="" data-resource-suffix="" data-rustdoc-version="1.75.0 (82e1608df 2023-12-21)" data-channel="1.75.0" data-search-js="search-8fbf244ebcf71464.js" data-settings-js="settings-74424d7eec62a23e.js" ><script src="../../static.files/storage-fec3eaa3851e447d.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-9dd44ab47b99a0fb.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-5d8b3c7633ad77ba.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../palette/index.html">palette</a><span class="version">0.7.4</span></h2></div><h2 class="location"><a href="#">FromColorUnclampedMut</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.from_color_unclamped_mut">from_color_unclamped_mut</a></li></ul><h3><a href="#foreign-impls">Implementations on Foreign Types</a></h3><ul class="block"><li><a href="#impl-FromColorUnclampedMut%3C%5BU%5D%3E-for-%5BT%5D">[T]</a></li></ul><h3><a href="#object-safety">Object Safety</a></h3><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In palette::convert</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="../index.html">palette</a>::<wbr><a href="index.html">convert</a>::<wbr><a class="trait" href="#">FromColorUnclampedMut</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/palette/convert/from_into_color_unclamped_mut.rs.html#102-112">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait FromColorUnclampedMut&lt;T&gt;<span class="where fmt-newline">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/1.75.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="trait.FromColorUnclampedMut.html" title="trait palette::convert::FromColorUnclampedMut">FromColorUnclampedMut</a>&lt;Self&gt;,</span>{
    // Required method
    fn <a href="#tymethod.from_color_unclamped_mut" class="fn">from_color_unclamped_mut</a>(
        color: <a class="primitive" href="https://doc.rust-lang.org/1.75.0/std/primitive.reference.html">&amp;mut T</a>
    ) -&gt; <a class="struct" href="struct.FromColorUnclampedMutGuard.html" title="struct palette::convert::FromColorUnclampedMutGuard">FromColorUnclampedMutGuard</a>&lt;'_, Self, T&gt;;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Temporarily convert colors in place, without clamping.</p>
<p>It allows colors to be converted without using more additional memory than
what is necessary for the conversion, itself. The conversion will however
have to be reverted at some point, since the memory space is borrowed and
has to be restored to its original format. This is enforced by a scope guard
that does the opposite conversion when it’s dropped.</p>
<p>See also <a href="trait.IntoColorUnclampedMut.html" title="trait palette::convert::IntoColorUnclampedMut"><code>IntoColorUnclampedMut</code></a> and <a href="trait.FromColorMut.html" title="trait palette::convert::FromColorMut"><code>FromColorMut</code></a>.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>palette::{convert::FromColorUnclampedMut, ShiftHueAssign, Srgb, Hsv};

<span class="kw">let </span><span class="kw-2">mut </span>rgb = [
    Srgb::new(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>),
    Srgb::new(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>),
    Srgb::new(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>),
];

{
    <span class="kw">let </span><span class="kw-2">mut </span>hsv = &lt;[Hsv]&gt;::from_color_unclamped_mut(<span class="kw-2">&amp;mut </span>rgb);

    <span class="comment">// All of the colors in `rgb` have been converted to `Hsv`:
    </span><span class="macro">assert_eq!</span>(
        <span class="kw-2">*</span>hsv,
        [
            Hsv::new(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>),
            Hsv::new(<span class="number">120.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>),
            Hsv::new(<span class="number">240.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>),
        ]
    );

    hsv.shift_hue_assign(<span class="number">60.0</span>);

} <span class="comment">// The guard is dropped here and the colors are restored to `Srgb`.

// Notice how the colors in `rgb` have changed:
</span><span class="macro">assert_eq!</span>(
    rgb,
    [
        Srgb::new(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>),
        Srgb::new(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>),
        Srgb::new(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>),
    ]
);</code></pre></div>
<p>The scope guard, <a href="struct.FromColorUnclampedMutGuard.html" title="struct palette::convert::FromColorUnclampedMutGuard"><code>FromColorUnclampedMutGuard</code></a>, has a few extra methods
that can make multiple conversion steps more efficient. One of those is
<a href="struct.FromColorUnclampedMutGuard.html#method.then_into_color_unclamped_mut" title="method palette::convert::FromColorUnclampedMutGuard::then_into_color_unclamped_mut"><code>FromColorUnclampedMutGuard::then_into_color_unclamped_mut</code></a>, which works
like <a href="trait.IntoColorUnclampedMut.html#tymethod.into_color_unclamped_mut" title="method palette::convert::IntoColorUnclampedMut::into_color_unclamped_mut"><code>IntoColorUnclampedMut::into_color_unclamped_mut</code></a>, but does not add
an extra step when restoring to the original color type. This example will
convert <code>Srgb → Hsv → Hsl → Srgb</code> instead of <code>Srgb → Hsv → Hsl → Hsv → Srgb</code>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>palette::{convert::FromColorUnclampedMut, ShiftHueAssign, LightenAssign, Srgb, Hsv, Hsl};

<span class="kw">let </span><span class="kw-2">mut </span>rgb = [
    Srgb::new(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>),
    Srgb::new(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>),
    Srgb::new(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>),
];

{
    <span class="kw">let </span><span class="kw-2">mut </span>hsv = &lt;[Hsv]&gt;::from_color_unclamped_mut(<span class="kw-2">&amp;mut </span>rgb);
    hsv.shift_hue_assign(<span class="number">60.0</span>);

    <span class="kw">let </span><span class="kw-2">mut </span>hsl = hsv.then_into_color_unclamped_mut::&lt;[Hsl]&gt;();
    hsl.lighten_assign(<span class="number">0.5</span>);

} <span class="comment">// `then_into_color_unclamped_mut` makes the guard restore directly to `Srgb` here.

// Notice how the colors in `rgb` have changed:
</span><span class="macro">assert_eq!</span>(
    rgb,
    [
        Srgb::new(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.5</span>),
        Srgb::new(<span class="number">0.5</span>, <span class="number">1.0</span>, <span class="number">1.0</span>),
        Srgb::new(<span class="number">1.0</span>, <span class="number">0.5</span>, <span class="number">1.0</span>),
    ]
);</code></pre></div>
<h2 id="note"><a href="#note">Note</a></h2>
<p>The reused memory space could end up with unexpected values if the
conversion panics or if the scope guard’s <code>drop</code> function doesn’t run. The
default implementations of <code>FromColorUnclampedMut</code> uses <a href="../cast/trait.ArrayCast.html" title="trait palette::cast::ArrayCast"><code>ArrayCast</code></a>, which
is only implemented for color types that can safely accept and recover from
any value. Other color types will have to provide their own implementations
that can handle this case.</p>
</div></details><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.from_color_unclamped_mut" class="method"><a class="src rightside" href="../../src/palette/convert/from_into_color_unclamped_mut.rs.html#111">source</a><h4 class="code-header">fn <a href="#tymethod.from_color_unclamped_mut" class="fn">from_color_unclamped_mut</a>(
    color: <a class="primitive" href="https://doc.rust-lang.org/1.75.0/std/primitive.reference.html">&amp;mut T</a>
) -&gt; <a class="struct" href="struct.FromColorUnclampedMutGuard.html" title="struct palette::convert::FromColorUnclampedMutGuard">FromColorUnclampedMutGuard</a>&lt;'_, Self, T&gt;</h4></section></summary><div class="docblock"><p>Temporarily convert from another color type in place, without clamping.</p>
<p>This reuses the memory space, and the returned scope guard will restore
the converted colors to their original type when it’s dropped.</p>
</div></details></div><h2 id="object-safety" class="small-section-header">Object Safety<a href="#object-safety" class="anchor">§</a></h2><div class="object-safety-info">This trait is <b>not</b> <a href="https://doc.rust-lang.org/1.75.0/reference/items/traits.html#object-safety">object safe</a>.</div><h2 id="foreign-impls" class="small-section-header">Implementations on Foreign Types<a href="#foreign-impls" class="anchor">§</a></h2><details class="toggle implementors-toggle"><summary><section id="impl-FromColorUnclampedMut%3C%5BU%5D%3E-for-%5BT%5D" class="impl"><a class="src rightside" href="../../src/palette/convert/from_into_color_unclamped_mut.rs.html#134-153">source</a><a href="#impl-FromColorUnclampedMut%3C%5BU%5D%3E-for-%5BT%5D" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="trait.FromColorUnclampedMut.html" title="trait palette::convert::FromColorUnclampedMut">FromColorUnclampedMut</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.75.0/std/primitive.slice.html">[U]</a>&gt; for <a class="primitive" href="https://doc.rust-lang.org/1.75.0/std/primitive.slice.html">[T]</a><span class="where fmt-newline">where
    T: <a class="trait" href="trait.FromColorUnclampedMut.html" title="trait palette::convert::FromColorUnclampedMut">FromColorUnclampedMut</a>&lt;U&gt; + <a class="trait" href="../cast/trait.ArrayCast.html" title="trait palette::cast::ArrayCast">ArrayCast</a> + ?<a class="trait" href="https://doc.rust-lang.org/1.75.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,
    U: <a class="trait" href="trait.FromColorUnclampedMut.html" title="trait palette::convert::FromColorUnclampedMut">FromColorUnclampedMut</a>&lt;T&gt; + <a class="trait" href="../cast/trait.ArrayCast.html" title="trait palette::cast::ArrayCast">ArrayCast</a>&lt;Array = T::<a class="associatedtype" href="../cast/trait.ArrayCast.html#associatedtype.Array" title="type palette::cast::ArrayCast::Array">Array</a>&gt; + ?<a class="trait" href="https://doc.rust-lang.org/1.75.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><section id="method.from_color_unclamped_mut" class="method trait-impl"><a class="src rightside" href="../../src/palette/convert/from_into_color_unclamped_mut.rs.html#140-152">source</a><a href="#method.from_color_unclamped_mut" class="anchor">§</a><h4 class="code-header">fn <a href="#tymethod.from_color_unclamped_mut" class="fn">from_color_unclamped_mut</a>(
    colors: &amp;mut <a class="primitive" href="https://doc.rust-lang.org/1.75.0/std/primitive.slice.html">[U]</a>
) -&gt; <a class="struct" href="struct.FromColorUnclampedMutGuard.html" title="struct palette::convert::FromColorUnclampedMutGuard">FromColorUnclampedMutGuard</a>&lt;'_, Self, <a class="primitive" href="https://doc.rust-lang.org/1.75.0/std/primitive.slice.html">[U]</a>&gt;</h4></section></div></details><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-FromColorUnclampedMut%3CU%3E-for-T" class="impl"><a class="src rightside" href="../../src/palette/convert/from_into_color_unclamped_mut.rs.html#114-132">source</a><a href="#impl-FromColorUnclampedMut%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="trait.FromColorUnclampedMut.html" title="trait palette::convert::FromColorUnclampedMut">FromColorUnclampedMut</a>&lt;U&gt; for T<span class="where fmt-newline">where
    T: <a class="trait" href="trait.FromColorUnclamped.html" title="trait palette::convert::FromColorUnclamped">FromColorUnclamped</a>&lt;U&gt; + <a class="trait" href="../cast/trait.ArrayCast.html" title="trait palette::cast::ArrayCast">ArrayCast</a> + <a class="trait" href="https://doc.rust-lang.org/1.75.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,
    U: <a class="trait" href="trait.FromColorUnclamped.html" title="trait palette::convert::FromColorUnclamped">FromColorUnclamped</a>&lt;T&gt; + <a class="trait" href="../cast/trait.ArrayCast.html" title="trait palette::cast::ArrayCast">ArrayCast</a>&lt;Array = T::<a class="associatedtype" href="../cast/trait.ArrayCast.html#associatedtype.Array" title="type palette::cast::ArrayCast::Array">Array</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.75.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,</span></h3></section></div><script src="../../trait.impl/palette/convert/from_into_color_unclamped_mut/trait.FromColorUnclampedMut.js" data-ignore-extern-crates="std" async></script></section></div></main></body></html>