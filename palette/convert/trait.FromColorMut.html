<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Temporarily convert colors in place."><title>FromColorMut in palette::convert - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-84e720fa.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="palette" data-themes="" data-resource-suffix="" data-rustdoc-version="1.89.0 (29483883e 2025-08-04)" data-channel="1.89.0" data-search-js="search-92309212.js" data-settings-js="settings-5514c975.js" ><script src="../../static.files/storage-4e99c027.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-fd3af306.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../palette/index.html">palette</a><span class="version">0.7.6</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">From<wbr>Color<wbr>Mut</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#note" title="Note">Note</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.from_color_mut" title="from_color_mut">from_color_mut</a></li></ul><h3><a href="#foreign-impls">Implementations on Foreign Types</a></h3><ul class="block"><li><a href="#impl-FromColorMut%3C%5BU%5D%3E-for-%5BT%5D" title="[T]">[T]</a></li></ul><h3><a href="#dyn-compatibility">Dyn Compatibility</a></h3><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In palette::<wbr>convert</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">palette</a>::<wbr><a href="index.html">convert</a></div><h1>Trait <span class="trait">FromColorMut</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/palette/convert/from_into_color_mut.rs.html#101-111">Source</a> </span></div><pre class="rust item-decl"><code>pub trait FromColorMut&lt;T&gt;<div class="where">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/1.89.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="trait.FromColorMut.html" title="trait palette::convert::FromColorMut">FromColorMut</a>&lt;Self&gt;,</div>{
    // Required method
    fn <a href="#tymethod.from_color_mut" class="fn">from_color_mut</a>(color: <a class="primitive" href="https://doc.rust-lang.org/1.89.0/std/primitive.reference.html">&amp;mut T</a>) -&gt; <a class="struct" href="struct.FromColorMutGuard.html" title="struct palette::convert::FromColorMutGuard">FromColorMutGuard</a>&lt;'_, Self, T&gt;;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Temporarily convert colors in place.</p>
<p>It allows colors to be converted without using more additional memory than
what is necessary for the conversion, itself. The conversion will however
have to be reverted at some point, since the memory space is borrowed and
has to be restored to its original format. This is enforced by a scope guard
that does the opposite conversion when it’s dropped.</p>
<p>See also <a href="trait.IntoColorMut.html" title="trait palette::convert::IntoColorMut"><code>IntoColorMut</code></a> and <a href="trait.FromColorUnclampedMut.html" title="trait palette::convert::FromColorUnclampedMut"><code>FromColorUnclampedMut</code></a>.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>palette::{FromColorMut, ShiftHueAssign, Srgb, Hsv};

<span class="kw">let </span><span class="kw-2">mut </span>rgb = [
    Srgb::new(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>),
    Srgb::new(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>),
    Srgb::new(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>),
];

{
    <span class="kw">let </span><span class="kw-2">mut </span>hsv = &lt;[Hsv]&gt;::from_color_mut(<span class="kw-2">&amp;mut </span>rgb);

    <span class="comment">// All of the colors in `rgb` have been converted to `Hsv`:
    </span><span class="macro">assert_eq!</span>(
        <span class="kw-2">*</span>hsv,
        [
            Hsv::new(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>),
            Hsv::new(<span class="number">120.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>),
            Hsv::new(<span class="number">240.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>),
        ]
    );

    hsv.shift_hue_assign(<span class="number">60.0</span>);

} <span class="comment">// The guard is dropped here and the colors are restored to `Srgb`.

// Notice how the colors in `rgb` have changed:
</span><span class="macro">assert_eq!</span>(
    rgb,
    [
        Srgb::new(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>),
        Srgb::new(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>),
        Srgb::new(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>),
    ]
);</code></pre></div>
<p>The scope guard, <a href="struct.FromColorMutGuard.html" title="struct palette::convert::FromColorMutGuard"><code>FromColorMutGuard</code></a>, has a few extra methods that can
make multiple conversion steps more efficient. One of those is
<a href="struct.FromColorMutGuard.html#method.then_into_color_mut" title="method palette::convert::FromColorMutGuard::then_into_color_mut"><code>FromColorMutGuard::then_into_color_mut</code></a>, which works like
<a href="trait.IntoColorMut.html#tymethod.into_color_mut" title="method palette::convert::IntoColorMut::into_color_mut"><code>IntoColorMut::into_color_mut</code></a>, but does not add an extra step when
restoring to the original color type. This example will convert <code>Srgb → Hsv → Hsl → Srgb</code> instead of <code>Srgb → Hsv → Hsl → Hsv → Srgb</code>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>palette::{FromColorMut, ShiftHueAssign, LightenAssign, Srgb, Hsv, Hsl};

<span class="kw">let </span><span class="kw-2">mut </span>rgb = [
    Srgb::new(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>),
    Srgb::new(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>),
    Srgb::new(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>),
];

{
    <span class="kw">let </span><span class="kw-2">mut </span>hsv = &lt;[Hsv]&gt;::from_color_mut(<span class="kw-2">&amp;mut </span>rgb);
    hsv.shift_hue_assign(<span class="number">60.0</span>);

    <span class="kw">let </span><span class="kw-2">mut </span>hsl = hsv.then_into_color_mut::&lt;[Hsl]&gt;();
    hsl.lighten_assign(<span class="number">0.5</span>);

} <span class="comment">// `then_into_color_mut` makes the guard restore directly to `Srgb` here.

// Notice how the colors in `rgb` have changed:
</span><span class="macro">assert_eq!</span>(
    rgb,
    [
        Srgb::new(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.5</span>),
        Srgb::new(<span class="number">0.5</span>, <span class="number">1.0</span>, <span class="number">1.0</span>),
        Srgb::new(<span class="number">1.0</span>, <span class="number">0.5</span>, <span class="number">1.0</span>),
    ]
);</code></pre></div>
<h2 id="note"><a class="doc-anchor" href="#note">§</a>Note</h2>
<p>The reused memory space could end up with unexpected values if the
conversion panics or if the scope guard’s <code>drop</code> function doesn’t run. The
default implementations of <code>FromColorMut</code> uses <a href="../cast/trait.ArrayCast.html" title="trait palette::cast::ArrayCast"><code>ArrayCast</code></a>, which is only
implemented for color types that can safely accept and recover from any
value. Other color types will have to provide their own implementations that
can handle this case.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.from_color_mut" class="method"><a class="src rightside" href="../../src/palette/convert/from_into_color_mut.rs.html#110">Source</a><h4 class="code-header">fn <a href="#tymethod.from_color_mut" class="fn">from_color_mut</a>(color: <a class="primitive" href="https://doc.rust-lang.org/1.89.0/std/primitive.reference.html">&amp;mut T</a>) -&gt; <a class="struct" href="struct.FromColorMutGuard.html" title="struct palette::convert::FromColorMutGuard">FromColorMutGuard</a>&lt;'_, Self, T&gt;</h4></section></summary><div class="docblock"><p>Temporarily convert from another color type in place.</p>
<p>This reuses the memory space, and the returned scope guard will restore
the converted colors to their original type when it’s dropped.</p>
</div></details></div><h2 id="dyn-compatibility" class="section-header">Dyn Compatibility<a href="#dyn-compatibility" class="anchor">§</a></h2><div class="dyn-compatibility-info"><p>This trait is <b>not</b> <a href="https://doc.rust-lang.org/1.89.0/reference/items/traits.html#dyn-compatibility">dyn compatible</a>.</p><p><i>In older versions of Rust, dyn compatibility was called "object safety", so this trait is not object safe.</i></p></div><h2 id="foreign-impls" class="section-header">Implementations on Foreign Types<a href="#foreign-impls" class="anchor">§</a></h2><details class="toggle implementors-toggle"><summary><section id="impl-FromColorMut%3C%5BU%5D%3E-for-%5BT%5D" class="impl"><a class="src rightside" href="../../src/palette/convert/from_into_color_mut.rs.html#133-152">Source</a><a href="#impl-FromColorMut%3C%5BU%5D%3E-for-%5BT%5D" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="trait.FromColorMut.html" title="trait palette::convert::FromColorMut">FromColorMut</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.89.0/std/primitive.slice.html">[U]</a>&gt; for <a class="primitive" href="https://doc.rust-lang.org/1.89.0/std/primitive.slice.html">[T]</a><div class="where">where
    T: <a class="trait" href="trait.FromColorMut.html" title="trait palette::convert::FromColorMut">FromColorMut</a>&lt;U&gt; + <a class="trait" href="../cast/trait.ArrayCast.html" title="trait palette::cast::ArrayCast">ArrayCast</a>,
    U: <a class="trait" href="trait.FromColorMut.html" title="trait palette::convert::FromColorMut">FromColorMut</a>&lt;T&gt; + <a class="trait" href="../cast/trait.ArrayCast.html" title="trait palette::cast::ArrayCast">ArrayCast</a>&lt;Array = T::<a class="associatedtype" href="../cast/trait.ArrayCast.html#associatedtype.Array" title="type palette::cast::ArrayCast::Array">Array</a>&gt;,</div></h3></section></summary><div class="impl-items"><section id="method.from_color_mut" class="method trait-impl"><a class="src rightside" href="../../src/palette/convert/from_into_color_mut.rs.html#139-151">Source</a><a href="#method.from_color_mut" class="anchor">§</a><h4 class="code-header">fn <a href="#tymethod.from_color_mut" class="fn">from_color_mut</a>(colors: &amp;mut <a class="primitive" href="https://doc.rust-lang.org/1.89.0/std/primitive.slice.html">[U]</a>) -&gt; <a class="struct" href="struct.FromColorMutGuard.html" title="struct palette::convert::FromColorMutGuard">FromColorMutGuard</a>&lt;'_, Self, <a class="primitive" href="https://doc.rust-lang.org/1.89.0/std/primitive.slice.html">[U]</a>&gt;</h4></section></div></details><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-FromColorMut%3CU%3E-for-T" class="impl"><a class="src rightside" href="../../src/palette/convert/from_into_color_mut.rs.html#113-131">Source</a><a href="#impl-FromColorMut%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="trait.FromColorMut.html" title="trait palette::convert::FromColorMut">FromColorMut</a>&lt;U&gt; for T<div class="where">where
    T: <a class="trait" href="trait.FromColor.html" title="trait palette::convert::FromColor">FromColor</a>&lt;U&gt; + <a class="trait" href="../cast/trait.ArrayCast.html" title="trait palette::cast::ArrayCast">ArrayCast</a> + <a class="trait" href="https://doc.rust-lang.org/1.89.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,
    U: <a class="trait" href="trait.FromColor.html" title="trait palette::convert::FromColor">FromColor</a>&lt;T&gt; + <a class="trait" href="../cast/trait.ArrayCast.html" title="trait palette::cast::ArrayCast">ArrayCast</a>&lt;Array = T::<a class="associatedtype" href="../cast/trait.ArrayCast.html#associatedtype.Array" title="type palette::cast::ArrayCast::Array">Array</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.89.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,</div></h3></section></div><script src="../../trait.impl/palette/convert/from_into_color_mut/trait.FromColorMut.js" data-ignore-extern-crates="std" async></script></section></div></main></body></html>